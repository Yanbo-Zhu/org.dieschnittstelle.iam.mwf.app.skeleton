<!DOCTYPE html>
<html lang="en" manifest="offline.manifest">
<head>
    <meta charset="UTF-8">
    <title>MWF DEMO</title>
    <!-- this tag avoids scaling the view on display -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1"/>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- for pwa, we may include the manifest
    <link rel="manifest" href="pwa/webapp-manifest.json"> -->
    <!-- framework + application style (shown by the IDE as not available as the file will be generated by the build process
         and placed next to the copy of this file in the dist directory -->
    <link rel="stylesheet" href="app-style.bundle.min.css"/>
    <link rel="stylesheet" href="./css/myapp-style.css"/>


    <!--  comment-in if mapviews shall be used. It seems that libs and css need to be accessed online rather than be provided locally, there is also some issue when using leaflet+offline manifest
    Leaflet is a lightweight, open-source JavaScript library for creating interactive maps in the browser. It’s designed to be simple, fast, and mobile-friendly — perfect for web apps that need mapping features. -->

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script> -->

    <!-- framework + application js resources (also shown as not available, see above) -->
    <script type="module" src="app-js.bundle.min.js"></script>
</head>

<!-- TODO: change the application name if it is modified -->
<body data-mwf-application="MyApplication" class="mwf-loading-app">

<!-- TODO-REPEATED: add new views here -->
<!--in the Beginning, data-mwf-viewcontroller="MyInitialViewController"-->
<!--data-mwf-viewcontroller="ListviewViewController" is equal to: class ListviewViewController zu instanzierenmm. constructor und oncreate() methode werde aufgeruft-->
<!--class="mwf-view mwf-view-initial mwf-styling"-->
<!--mwf-view-initial is the sign where the application starts. It is the first view that is shown when the application is started. The class mwf-view-initial is used to indicate this view.-->
<!--mwf-styling mwf-dialog-shown-->
<div id="myapp-listview" class="mwf-view mwf-view-initial" data-mwf-viewcontroller="ListviewViewController">
    <header>
        <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align mwf-img-sandwich-action"></button>
        <h1 class="mwf-left-align">Medien</h1>
        <button id="myapp-addNewItem" class="mwf-imgbutton mwf-img-plus mwf-right-align"></button>
    </header>
    <main class="mwf-scrollview">
        <!-- put data-mwf-listitem-view="myapp-listitem" in <ul>: data-mwf-listitem-view indicate that a listitem-view will be added into this ul element. Each item in this list item is contructed by using the template myapp-listitem-->
        <!--This template muss not be set within the <ul> element, but it is better to do so, as it is easier to find the template in the code-->
        <ul class="mwf-listview" data-mwf-listitem-view="myapp-listitem" data-mwf-listitem-menu="myapp-mediaItemMenu">
            <!--class="mwf-template": this <li>xx</li> is used as template with a self-defined name "myapp-listitem". this name is given through attribute data-mwf-templatename-->
<!--            mwf-databind explanatgon at 19:37   in 51.17 min am 2025.05.25-->
<!--            {title: "...", src: "...", add: "..."} .  reactive databinding . the item has those attribute originally -->
            <li class="mwf-listitem mwf-li-title-subtitle mwf-template mwf-databind" data-mwf-templatename="myapp-listitem">
                <img class="mwf-left-align" src="{{src}}"/>
                <div class="mwf-left-align mwf-li-titleblock">
                    <h2>{{title}} {{_id}}</h2>
                    <h3>{{addedDateString}}</h3>
                </div>
<!--                mwf-listitem-menu-control  call the dialog which is given in data-mwf-listitem-menu="myapp-mediaItemMenu"-->
                <button class="mwf-imgbutton mwf-img-options-vertical mwf-right-align mwf-listitem-menu-control"></button>
            </li>
        </ul>
    </main>
    <footer>
        <button class="mwf-imgbutton mwf-img-refresh mwf-right-align"></button>
    </footer>
</div>

<!-- Aktionsmenue -->
<!--class = mwf-styling mwf-dialog-shown -->
<!--mwf-popup: Bei Öffnen des Dialogs soll die Listenansicht über einen kurzen Zeitraum hinweg ausgeblendet werden -->
<div class="mwf-listitem-menu mwf-dialog mwf-popup mwf-template mwf-databind" data-mwf-templatename="myapp-mediaItemMenu">
    <!--            {title: "...", src: "...", add: "..."} .  reactive databinding . the selected item has those attribute originally -->
    <header>
        <h2 class="mwf-dyncontent">{{title}} {{_id}}</h2>
    </header>
    <main>
        <ul>
<!--            mwf-menu-item is logic. mwf-li-singetitle is styling -->
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetaction="deleteItem">Delete</li>
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetaction="editItem">Edit </li>
        </ul>
    </main>
</div>


<!--mwf-view-initial: the first view shows up-->
<div class="mwf-view" id="myapp-readview" data-mwf-viewcontroller="ReadviewViewController">

<!--    {item: {title: "...", src: "...", _id: "..." , addedDateString: "..."}}-->
    <div class="mwf-template mwf-databind" data-mwf-templatename="myapp-readview-template">

        <header>
            <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align mwf-img-sandwich-action"></button>
            <h1 class="mwf-left-align">{{item.title}} {{item._id}}</h1>
            <button on-click="deleteItem"  class="mwf-imgbutton mwf-img-delete mwf-right-align"></button>
        </header>

        <main class="mwf-scrollview">
            <img src="{{item.src}}" />
        </main>

        <footer>
            <button class="mwf-imgbutton mwf-img-backward mwf-left-align mwf-back"></button>
        </footer>

    </div>

</div>

<!--AddNeuItem dialog -->
<!--It can also add those attribute into class : mwf-styling mwf-shown-->
<div class="mwf-dialog mwf-popup mwf-template mwf-databind mwf-view-component" data-mwf-templatename="myapp-mediaitem-dialog"  data-mwf-viewcontroller="EditDialogViewController">
    <main>
        <h2>{{#if itemToBeEdited.created}}MEDIUM AKTUALISIEREN{{else}}NEUES MEDIUM{{/if}}</h2>
        <!-- add a action when submit happens: give a event function by onsubmit. Lambda function funtionkiert hier nicht, like () => confirm('submit!') .      event.preventDefault(), e => e.preventDefault();-->
        <!--  <form onsubmit="confirm('Submit?') ?  console.log('submit') : event.preventDefault(); " >-->
        <!-- Default behaviour of a form is to submit the form (redirect to a new url address with the input value from form (input value was added into url addresse ) and reload the page.  But we want to prevent this behaviour (page reload), so we use event.preventDefault() -->
        <!-- <form onsubmit=" confirm('Submit?') ? console.log('submit', event) : event.preventDefault();">-->
        <!--  on + submit: wenn submit action ausgelost-->
        <form on-submit="submitEditForm">

            <!--  {itemToBeEdited: {title: "...", src: "..."}}  -->
            <input on-blur="onTextInputCompleted" class="mwf-autofocus" type="text" placeholder="Titel" name="title" value="{{itemToBeEdited.title}}" required="required"/>
            <div class="mwf-buttonbar">
                <button type="button" on-click="deleteEditedItem" disabled="{{#if !itemToBeEdited.created}}disabled{{/if}}" class="mwf-button mwf-left-align">Löschen</button>

                <!--nachdem Submit button klicken:  get request aufgebaut. Browser baut den get request auf und liest the input paramter.  Ausgelesenen Input Felder als Bestandteil eines Querry Strings hinten an die URL ran. das ist dann die neue URL dieser Browser.  Der Browser schickt den Request an den Server,  von dem die das html-Dokument geladen wurde, welches das Formular darstellt. -->
                <!-- du aber ein neues würde zum Server neues Dokument ausgeliefert -->
                <input class="mwf-button mw-button-prio mwf-right-align" type="submit" value="{{#if itemToBeEdited.created}}AKTUALISIEREN{{else}}Hinzufügen{{/if}}"/>
            </div>

        </form>
    </main>

</div>

<!--class: mwf-view-initial-->
<div id="myapp-demo-view" class="mwf-view" data-mwf-viewcontroller="FRMDemoViewController" >
    <div class="mwf-template mwf-databind" data-mwf-templatename="myapp-frm-demo-template">
        <header>
            <input class="mwf-imgbutton mwf-img-disk mwf-right-align" type="submit" value="submit" form="myapp-frm-demo-form"/>
        </header>
        <main>
            <form id="myapp-frm-demo-form" on-submit="submitForm">
                <fieldset class="mwf-material">
                    <legend>Image</legend>
                    <input name="imgsrc" type="text" required="required" value="{{item.title}}" />
                    <!-- <input class="mwf-button mwf-button-prio" type="submit" value="submit"/>-->
                    <input class="mwf-material-altinput" on-change="fileSelected" type="file" id="myapp-frm-demo-form-fileinput" />
                    <label class="mwf-material-altinput mwf-imgbutton mwf-img-camera" for="myapp-frm-demo-form-fileinput"></label>
                </fieldset>
                <img src="{{item.src}}"/>
            </form>
        </main>
        <footer class="mwf-imgbutton mwf-img-backward mwf-back mwf-left-align"></footer>
    </div>
</div>

<!-- MapsDemoViewController will be found in Main.js. Please input MapsDemoViewController in mwr.app.components in main.js-->
<div class="mwf-view mwf-view-initial" id="myapp-maps-demo" data-mwf-viewcontroller="MapsDemoViewController">
    <header>
        <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align mwf-img-sandwich-action"></button>
        <h1>Maps Demo</h1>
    </header>
    <main>
        <div id="myapp-maproot">

        </div>

    </main>
    <footer></footer>
</div>

<div id="sidemenu" class="mwf-sidemenu mwf-expanded mwf-view-component mwf-attaching mwf-initialise-onload" data-mwf-viewcontroller="SidemenuViewController">
    <ul>
        <li class="mwf-li-singletitle mwf-menu-item" data-mwf-id="mainmenu-items" data-mwf-targetview="myapp-listview">
            <div class="mwf-icon mwf-img-photo-album mwf-left-align"></div>
            <h2 class="mwf-left-align mwf-li-titleblock">Medien</h2>
        </li>
        <li class="mwf-li-singletitle mwf-menu-item" data-mwf-id="mainmenu-maps" data-mwf-targetview="myapp-maps-demo">
            <div class="mwf-icon mwf-img-map mwf-left-align"></div>
            <h2 class="mwf-left-align mwf-li-titleblock">Maps Demo</h2>
        </li>
    </ul>
</div>

</body>

</html>
